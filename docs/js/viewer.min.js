window.NACSS=window.NACSS??{},function(e){{function t(e){const t=window.pageXOffset,n=window.pageYOffset;let s=0,i=0;return 1===e.length?(s=e[0].pageX-t,i=e[0].pageY-n):2<=e.length&&(s=(e[0].pageX+e[1].pageX)/2-t,i=(e[0].pageY+e[1].pageY)/2-n),[s,i]}function n(e){return[e.pageX-window.pageXOffset,e.pageY-window.pageYOffset]}function s(e){const t=e.frm.offsetWidth/e.frm.offsetHeight,n=e.img.offsetWidth/e.img.offsetHeight;e.isLs=t<n;const s=getComputedStyle(e.img);e.margin=2*parseInt(s.outlineWidth);const i=e.img.style;i.minWidth="",i.minHeight="",e.isLs?(i.width=`calc(100% - ${e.margin}px)`,i.height="auto"):(i.width="auto",i.height=`calc(100% - ${e.margin}px)`,i.maxWidth="none"),e.baseSize=e.isLs?e.frm.clientWidth:e.frm.clientHeight;const o=e.isLs?e.img.naturalWidth:e.img.naturalHeight;e.realScale=o/e.baseSize,e.scale=1,a(e.frm,e.img)}function i(e){const t=e.img;t.src||(t.style.opacity="0",t.src=e.src,t.addEventListener("load",(()=>{s(e),h(e.frm,e.opts.styleLoaded),setTimeout((()=>{t.style.opacity="1"}),0)})))}function o(e,t){e.scale=Math.max(1,Math.min(e.opts.maxZoomRate,t));const n=e.baseSize*e.scale-e.margin+"px";e.isLs?e.img.style.minWidth=n:e.img.style.minHeight=n,a(e.frm,e.img)}function a(e,t){const n=t.offsetWidth,s=t.offsetHeight,i=e.clientWidth,o=e.clientHeight,a=t.style;a.left=n<i?(i-n)/2+"px":0,a.top=s<o?(o-s)/2+"px":0}e.viewerImage=function(e,a={}){if(0===e.length)return;a=Object.assign({styleOpener:":ncViewerOpener",styleOpenerWrapper:":ncViewerOpenerWrapper"},a);const r=e.map((e=>{const l=m(e.href),[r,c]=function(e,a){const l={opts:e=Object.assign({styleImageFrame:":ncFrameImage",styleLoaded:":ncLoaded",maxZoomRate:10},e),src:a,scale:1,realScale:1,baseSize:null,isLs:!1,margin:0,frm:null,img:null};return l.frm=document.createElement("div"),h(l.frm,l.opts.styleImageFrame),l.img=document.createElement("img"),l.img.addEventListener("click",(e=>e.stopPropagation())),l.frm.appendChild(l.img),function(e,t){let s=0,i=0,a=!1;function l(s,i){s.stopPropagation(),s.preventDefault();const[a,l]=n(s),r=(a+t.scrollLeft)/e.scale,c=(l+t.scrollTop)/e.scale;o(e,i),t.scrollLeft=r*e.scale-a,t.scrollTop=c*e.scale-l}t.addEventListener("mousedown",(e=>{e.button||(e.preventDefault(),[s,i]=n(e),a=!0)})),t.addEventListener("mousemove",(e=>{if(!a)return;e.stopPropagation(),e.preventDefault();const[o,l]=n(e);t.scrollLeft+=s-o,t.scrollTop+=i-l,s=o,i=l})),t.addEventListener("mousedrag",(e=>{a&&(e.stopPropagation(),e.preventDefault())})),t.addEventListener("mouseup",(()=>{a=!1})),t.addEventListener("wheel",(t=>{const n=0>t.deltaY?1.1:.9;l(t,e.scale*n)}),!0),t.addEventListener("dblclick",(t=>{e.realScale<1||l(t,e.scale<e.realScale?e.realScale:1)}),!0)}(l,l.frm),function(e,n){let s=0,i=0,a=0,l=0;function r(t,s){const i=n.scrollLeft,o=n.scrollTop;return[(t+i)/e.scale,(s+o)/e.scale]}function c(e){a=e.length,[s,i]=r(...t(e))}(function(e){let t=!1;window.addEventListener("touchmove",(e=>{t&&(e.preventDefault(),e.stopImmediatePropagation())}),{passive:!1}),e.addEventListener("touchstart",(()=>{t=!0})),e.addEventListener("touchend",(()=>{t=!1}))})(n),n.addEventListener("touchstart",(e=>{l=0,c(e.touches)})),n.addEventListener("touchmove",(r=>{r.preventDefault(),r.stopPropagation();const d=r.touches;a!==d.length&&c(d);const[p,f]=t(d);if(2<=d.length){const t=function(e){const t=e[0].screenX,n=e[0].screenY,s=e[1].screenX,i=e[1].screenY;return Math.sqrt(Math.pow(s-t,2)+Math.pow(i-n,2))}(d);if(l){const a=t/(l*e.scale);a&&a!==1/0&&o(e,e.scale*a),n.scrollLeft=s*e.scale-p,n.scrollTop=i*e.scale-f}l=t/e.scale}else n.scrollLeft=s*e.scale-p,n.scrollTop=i*e.scale-f}),{passive:!1})}(l,l.frm),l.doResize=()=>s(l),l.doOpen=()=>i(l),l.doClose=()=>{},[l,l.frm]}(a,e.href),d=function(e){if("FIGURE"===e.parentNode.tagName){const t=e.parentNode.getElementsByTagName("figcaption");if(0<t.length)return t[0].innerHTML}return null}(e);return function(e,t,n){h(e,t),"FIGURE"===e.parentNode.tagName&&h(e.parentNode,n)}(e,a.styleOpener,a.styleOpenerWrapper),{opener:e,hash:l,frameInst:r,frame:c,caption:d}}));l(r,a)}}{function i(e){const t=e.ifm;t.hasAttribute("data-nc-lazy")&&(t.removeAttribute("data-nc-lazy"),t.style.opacity="0",t.addEventListener("load",(()=>{h(e.frm,e.opts.styleLoaded),setTimeout((()=>{t.style.opacity="1"}),0)})),t.contentDocument.location.replace(e.src))}e.viewerIframe=function(e,t,n={}){if(0===e.length)return;n=Object.assign({styleOpener:":ncViewerOpener",styleOpenerWrapper:":ncViewerOpenerWrapper"},n);const s=e.map(((e,s)=>{const o=m(t[s].src),[a,l]=function(e,t){e=Object.assign({styleIframeFrame:":ncFrameIframe",styleLoaded:":ncLoaded"},e);const n=function(e){if(e.startsWith("https://www.youtube.com")){const t=new URL(e),n=new URLSearchParams(t.search);n.append("enablejsapi",1),t.search=n,e=t.toString()}return e}(t.src);if(t.removeAttribute("src"),t.setAttribute("data-nc-lazy",""),!t.style.aspectRatio){const[e,n]=function(e){let t=parseInt(e.width),n=parseInt(e.height);if(t&&n)return[t,n];const s=e.style.width,i=e.style.height;return s.indexOf("px")!==s.length-2||i.indexOf("px")!==i.length-2?[0,0]:(t=parseInt(s),n=parseInt(i),t&&n?[t,n]:[0,0])}(t);e&&n&&(t.style.aspectRatio=`${e} / ${n}`)}const s={opts:e,src:n,ifm:t,scale:1,realScale:1,baseSize:null,isLs:!1,margin:0,frm:null};return s.frm=document.createElement("div"),h(s.frm,s.opts.styleIframeFrame),s.ifm.addEventListener("click",(e=>e.stopPropagation())),s.frm.appendChild(s.ifm),s.doResize=()=>{},s.doOpen=()=>i(s),s.doClose=()=>function(e){e.src.startsWith("https://www.youtube.com")&&e.ifm.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}(s),[s,s.frm]}(n,t[s]);return function(e,t){h(e,t)}(e,n.styleOpener),{opener:e,hash:o,frameInst:a,frame:l,caption:null}}));l(s,n)}}function l(e,t={}){if(0===e.length)return;t=Object.assign({styleRoot:":ncViewer",styleCloser:":ncViewerCloser",stylePrev:":ncViewerPrev",styleNext:":ncViewerNext",styleCaption:":ncViewerCaption",styleOpen:":ncOpen",styleVisible:":ncVisible",styleInstantly:":ncInstantly",hashPrefix:"viewer:"},t);const n=e.map((e=>{const n=function(e,t,n,s,i=null){const o={};o.opts=e,o.fi=n,o.id=c++,o.hash=t,o.dlg=document.createElement("div"),h(o.dlg,e.styleRoot),o.dlg.addEventListener("click",(e=>function(e){e.preventDefault(),history.back()}(e))),o.dlg.appendChild(s);const a=document.createElement("button");if(h(a,e.styleCloser),o.dlg.appendChild(a),o.btnPrev=document.createElement("button"),o.btnNext=document.createElement("button"),h(o.btnPrev,e.stylePrev),h(o.btnNext,e.styleNext),o.dlg.appendChild(o.btnPrev),o.dlg.appendChild(o.btnNext),i){const t=document.createElement("div");t.innerHTML=`<span>${i}</span>`,h(t,e.styleCaption),o.dlg.appendChild(t)}return document.body.appendChild(o.dlg),function(e,t){e.btnNext.style.display="none",t?(e.btnPrev.addEventListener("click",(n=>{n.stopPropagation(),u(e,!0),f(t,!0)})),function(e,t){e.btnNext.addEventListener("click",(n=>{n.stopPropagation(),u(e,!0),f(t,!0)})),e.btnNext.style.display=null}(t,e)):e.btnPrev.style.display="none"}(o,d),d=o,o}(t,e.hash,e.frameInst,e.frame,e.caption);return e.opener.addEventListener("click",(e=>function(e,t){if(t.preventDefault(),f(e),location.hash){const e=location.href.substr(0,location.href.indexOf("#"));history.replaceState(null,"",e)}const n="#"+e.opts.hashPrefix+e.hash;history.pushState({name:"nc-viewer",id:e.id},null,n)}(n,e))),n}));!function(e){(function(e,t=!1){t&&e();g.push(function(e){let t;return(...n)=>{t||(t=!0,requestAnimationFrame((()=>{t=!1,e(...n)})))}}(e))})((()=>{for(const t of e)t.fi.doResize();setTimeout((()=>{for(const t of e)t.fi.doResize()}),200)})),window.addEventListener("keydown",(t=>{if(null!==p&&!t.altKey&&!t.ctrlKey&&!t.shiftKey){const n=e[p];"Escape"===t.key?n.dlg.click():"ArrowLeft"===t.key?n.btnPrev.click():"ArrowRight"===t.key&&n.btnNext.click()}}))}(n),function(e,t){window.addEventListener("popstate",(t=>{null!==p&&u(e[p]),t.state&&"nc-viewer"===t.state.name&&void 0!==t.state.id&&f(e[t.state.id])})),window.addEventListener("hashchange",(()=>r(e,t,location.hash))),r(e,t,location.hash)}(n,t.hashPrefix)}function r(e,t,n){if(0!==location.hash.indexOf("#"+t))return;const s=n.replace("#"+t,"");if(s)for(let t=0;t<e.length;t+=1)if(e[t].hash===s){null!==p&&p!==t&&u(e[p]),null!==p&&p===t||f(e[t]);break}}let c=0,d=null,p=null;function f(e,t=!1){if(h(e.dlg,e.opts.styleOpen),e.fi.doOpen(),t){e.fi.doResize(),h(e.dlg,e.opts.styleInstantly),h(e.dlg,e.opts.styleVisible),setTimeout((()=>{h(e.dlg,e.opts.styleInstantly,!1)}),20);const t="#"+e.opts.hashPrefix+e.hash;history.replaceState(null,"",t)}else setTimeout((()=>{e.fi.doResize(),h(e.dlg,e.opts.styleVisible)}),0);p=e.id}function u(e,t=!1){e.fi.doClose(),t?(h(e.dlg,e.opts.styleInstantly),h(e.dlg,e.opts.styleVisible,!1),setTimeout((()=>{h(e.dlg,e.opts.styleInstantly,!1)}),20)):h(e.dlg,e.opts.styleVisible,!1),setTimeout((()=>{h(e.dlg,e.opts.styleOpen,!1)}),200),p=null}function m(e,t=!0){let n=2166136261;for(let t=0;t<e.length;t+=1)n^=e.charCodeAt(t),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return t?("0000000"+(n>>>0).toString(16)).substr(-8):n>>>0}function h(e,t,n=!0,s=""){const i=t.substr(1);if(t.startsWith(":"))n?e.dataset[i]=s:delete e.dataset[i];else{const t=[i,s].join("-");n?e.classList.add(t):e.classList.remove(t)}}const g=[];document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const e of g)e()}),{passive:!0})}))}(window.NACSS);
//# sourceMappingURL=viewer.min.js.map